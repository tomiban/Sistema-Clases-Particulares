@model TeddyMVC.Models.FacturaViewModel
@{
    ViewBag.Title = "Factura";
    var turnosIds = ViewBag.TurnosIds as int[];
    Layout = "_Layout";
}

<style>
    .section-divider {
        border-top: 2px solid #ddd;
        margin: 30px 0;
    }

    .btn-section {
        margin: 30px 0;
    }

    .btn-spacing {
        margin-right: 10px;
    }

    .total-amount {
        font-size: 1.5rem;
        color: #D32F2F;
        font-weight: bold;
    }

    .card-header {
        background-color: #f8f9fa;
    }

    .card-body p {
        margin-bottom: 0.5rem;
    }
</style>

<div class="container">
 <partial name="_FacturaPartial.cshtml" />

</div>

<div class="text-center btn-section">
    <a href="@Url.Action("Index", "Alumnos")" class="btn btn-secondary btn-spacing">
        <span class="oi oi-arrow-left"></span> Volver a Facturación
    </a>
    <button id="btnDownloadPdf" class="btn btn-primary btn-spacing">
        <span class="oi oi-data-transfer-download"></span> Descargar PDF
    </button>
    <button id="btnSendByTel" class="btn btn-success btn-spacing">
        <i class="fab fa-whatsapp"></i> Contactar
    </button>
</div>

<form id="downloadForm" action="@Url.Action("DownloadFacturaPdf", "Facturacion")" method="post" style="display:none;">
    @foreach (var id in turnosIds)
    {
        <input type="hidden" name="turnosIds" value="@id" />
    }
</form>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>
    $(document).ready(function () {
        $('#btnDownloadPdf').click(function () {
            $('#downloadForm').submit();
        });
    });

      $('#btnSendByTel').click(function () {
            var phoneNumber = "@Model.Alumno.Telefono";
            var message = encodeURIComponent("Aquí está tu factura.");
            var whatsappUrl = `https://wa.me/${phoneNumber}?text=${message}`;

            window.open(whatsappUrl, '_blank');
        });
</script>
<div class="p-4"></div>